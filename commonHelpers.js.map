{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nconst startBtn = document.querySelector(\"button[data-start]\")\nconst dateInput = document.querySelector(\"input[type='text']#datetime-picker\")\nconst timerElements = {\n    days: document.querySelector(\"span[data-days]\"),\n    hours: document.querySelector(\"span[data-hours]\"),\n    minutes: document.querySelector(\"span[data-minutes]\"),\n    seconds: document.querySelector(\"span[data-seconds]\"),\n}\nlet userSelectedDate = \"\"\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        userSelectedDate = selectedDates[0]\n        console.log(userSelectedDate);\n\n        if (Date.now() <= userSelectedDate) {\n            startBtn.disabled = false\n            startBtn.addEventListener(\"click\", handleStartTimer)\n\n        } else {\n            iziToast.show({\n                title: 'Error',\n                message: 'Please choose a date in the future',\n                titleColor: 'white',\n                messageColor: 'white',\n                backgroundColor: 'red',\n                position: 'topRight'\n            });\n            startBtn.disabled = true\n            startBtn.removeEventListener(\"click\", handleStartTimer)\n        }\n    },\n};\n\n\nflatpickr(\"input[type='text']#datetime-picker\", options)\n\n\n\n\nfunction handleStartTimer(event) {\n    event.target.disabled = true\n    dateInput.disabled = true\n    startBtn.removeEventListener(\"click\", handleStartTimer)\n\n\n    const intervalID = setInterval(() => {\n        const diff = userSelectedDate - Date.now()\n        const convertedDiff = convertMs(diff);\n\n        if (Object.values(convertedDiff).every(value => value === -1)) {\n            clearInterval(intervalID)\n            startBtn.disabled = false\n            dateInput.disabled = false\n            startBtn.addEventListener(\"click\", handleStartTimer)\n            return;\n        }\n\n        Object.keys(timerElements).forEach(key => {\n            timerElements[key].textContent = addLeadingZero(convertedDiff[key])\n        })\n    }, 1000)\n}\n\n\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, 0)\n}"],"names":["startBtn","dateInput","timerElements","userSelectedDate","options","selectedDates","handleStartTimer","iziToast","flatpickr","event","intervalID","diff","convertedDiff","convertMs","value","key","addLeadingZero","ms","days","hours","minutes","seconds"],"mappings":"2GAOA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAY,SAAS,cAAc,oCAAoC,EACvEC,EAAgB,CAClB,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,oBAAoB,EACpD,QAAS,SAAS,cAAc,oBAAoB,CACxD,EACA,IAAIC,EAAmB,GAEvB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBF,EAAmBE,EAAc,CAAC,EAClC,QAAQ,IAAIF,CAAgB,EAExB,KAAK,IAAK,GAAIA,GACdH,EAAS,SAAW,GACpBA,EAAS,iBAAiB,QAASM,CAAgB,IAGnDC,EAAS,KAAK,CACV,MAAO,QACP,QAAS,qCACT,WAAY,QACZ,aAAc,QACd,gBAAiB,MACjB,SAAU,UAC1B,CAAa,EACDP,EAAS,SAAW,GACpBA,EAAS,oBAAoB,QAASM,CAAgB,EAE7D,CACL,EAGAE,EAAU,qCAAsCJ,CAAO,EAKvD,SAASE,EAAiBG,EAAO,CAC7BA,EAAM,OAAO,SAAW,GACxBR,EAAU,SAAW,GACrBD,EAAS,oBAAoB,QAASM,CAAgB,EAGtD,MAAMI,EAAa,YAAY,IAAM,CACjC,MAAMC,EAAOR,EAAmB,KAAK,IAAK,EACpCS,EAAgBC,EAAUF,CAAI,EAEpC,GAAI,OAAO,OAAOC,CAAa,EAAE,MAAME,GAASA,IAAU,EAAE,EAAG,CAC3D,cAAcJ,CAAU,EACxBV,EAAS,SAAW,GACpBC,EAAU,SAAW,GACrBD,EAAS,iBAAiB,QAASM,CAAgB,EACnD,MACH,CAED,OAAO,KAAKJ,CAAa,EAAE,QAAQa,GAAO,CACtCb,EAAca,CAAG,EAAE,YAAcC,EAAeJ,EAAcG,CAAG,CAAC,CAC9E,CAAS,CACJ,EAAE,GAAI,CACX,CAIA,SAASF,EAAUI,EAAI,CAQnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,SAASL,EAAeF,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,CAAC,CACtC"}